---
layout: episode
title: "Workflow management and tracking tools"
teaching: 10
exercises: 10
questions:
  - "Are there any tools out there for managing and tracking projects based on numerical simulations or analysis?"
  - "How can such a tool be adopted to your workflows?"
objectives:
  - "Get familiar with the Sumatra tool for managing numerical simulations and analysis"
  - "Get familiar with the common workflog language (CWL) for managing numerical simulations and analysis"
   
---

## Scientific workflows

- The simplest computerized scientific workflows are scripts that call in data, programs, 
and other inputs and produce outputs that might include visualizations and analytical results. 
- May be implemented in scripting languages such as Bash, Python or Perl with command-line interface, or environments like MATLAB or RStudio
- Many efforts to develop unified frameworks for managing scientific workflows, in order to:
  * provide user-friendly environment for researchers to create own workflows
  * provide interactive tools for researchers to execute workflows and view results in real-time
  * simplify sharing and reusing workflows between the scientists.
  * enable researchers to track the provenance of the workflow execution results and the workflow creation steps.  

## Provenance of data
Data Provenance provides a historical record of the data and its origins. The provenance of data which is generated by complex transformations such as workflows is of considerable value to scientists[21]. From it, one can ascertain the quality of the data based on its ancestral data and derivations, track back sources of errors, allow automated re-enactment of derivations to update a data, and provide attribution of data sources.  
[From Wikipedia](https://en.wikipedia.org/wiki/Data_lineage#Data_Provenance)

## Some best practices

- Make everything a project.
- Use consistent directory structure:
```
.
|-- data
|   |-- README.md
|   |-- dataset.csv
|-- man
|   |-- manuscript.tex
|-- results
|   |-- table.csv
|   |-- fig.png
|-- src
|   |-- main.py
|   |-- calculate_stuff.py
|   |-- test_calculate_stuff.py
```

<!-- 
```
project
│   README.md
│   Makefile
│   requirements.txt
└───raw_data
│   │   README.md
│   └───experiment1
│   │   │   data.csv
│   └───experiment2
│       │   data.csv
└───processed_data
└───source
    │   main.py
    │   analysis.py
└───results
```
-->

## Going further: workflow management and tracking systems

## Directed acyclic graphs (DAGs)
- Useful representation of data and their provenance
- Nodes can represent data, calculations, etc. - links represent their connections
- Used in many workflow management systems


### What tools are out there?

- [Sumatra](http://sumatra.readthedocs.io/en/0.7.4/), manages and tracks numerical simulations.
- [Common Workflow Language](https://github.com/common-workflow-language/common-workflow-language), a specification for describing analysis workflows and tools which are portable and scalable across software and hardware environments.
- [Snakemake](http://snakemake.readthedocs.io/en/stable/), a workflow management system to create reproducible and scalable data analyses.
- [Ruffus](https://code.google.com/archive/p/ruffus/), a lightweight python module for running computational pipelines.
- [AiiDA](http://www.aiida.net/), a flexible and scalable informatics' infrastructure to manage, preserve, and disseminate the simulations, data, and workflows of modern-day computational science (electronic structure calculations).
- [Kepler](https://kepler-project.org/), GUI tool to help scientists, analysts, and programmers create, execute, and share models and analyses across a broad range of scientific and engineering disciplines.
- [VisTrails](https://www.vistrails.org/index.php/Main_Page), an open-source scientific workflow and provenance management system that provides support for simulations, data exploration and visualization (GUI).
- [Pegasus](https://pegasus.isi.edu/), workflow management system to automate, recover, and debug scientific computations (command line and browser interface tool automating).
- [make](https://www.gnu.org/software/make/), not only for compiling code!


### Sumatra

- A tool for managing and tracking projects based on numerical simulations/analysis, aiming to supporting reproducible research. 
- An automated electronic lab notebook for computational projects.
- Similarities to Git.
- Keeps track of what was run: source code, input parameters, environment configuration, dependencies, etc.
- Stores when something was run, how long it took, what were input and output results.
- Easy to repeat calculations.
- Let's you browse a librariy of your activity via the browser.


### Common workflow language



## Exercise: Sumatra

## Exercise: Common workflow language

   > This material has been adapted from [an online tutorial](http://www.commonwl.org/user_guide/)


